# Caddyfile for Torrust Tracker full stack
# Caddy v2.10 - Automatic HTTPS with Let's Encrypt

# Global options
{
    # Email for Let's Encrypt notifications
    email admin@torrust.com
}

# Tracker REST API
api.torrust-tracker.com {
    reverse_proxy tracker:1212
}

# HTTP Tracker (BitTorrent announce/scrape)
http1.torrust-tracker.com {
    reverse_proxy tracker:7070
}

# Grafana UI with WebSocket support
# WebSocket connections work automatically - Caddy handles Connection: Upgrade
grafana.torrust-tracker.com {
    reverse_proxy grafana:3000
}
